<!-- バリテーションチェック -->
<% if @book.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@book.errors.count, "error") %> prohibited this product from being saved:</h2>
  <ul>
    <% @book.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
  </ul>
</div>
<% end %>
<body>
    <div class="col-xs-3">
		<div class="box1">

<!-- 			test用
			<h4>User info</h4>
			<%= attachment_image_tag(@user, :profile_image,size:'100x100') %>
			<table class=" table table-striped">
				<tr>
					<td>name </td>
					<td><%=  current_user.name %></td>
				</tr>
				<tr>
					<td>introduction</td>
					<td></td>
				</tr>
			</table> -->

			<section class="Userinfo">
				<h3>User info</h3>

				<!-- current_userからprofile_imageを取得 -->
				<%= attachment_image_tag(@user, :profile_image,size:'100x100', fallback: "no_image.jpg") %>

				<!-- current_userからnameを取得 -->
				<p>name <%=  current_user.name %></p>
				<p>introduction <%=  current_user.introduction%></p>

				<!-- current_userからidを取得し、/user/:id/editコントローラーに飛ぶ -->
				<!-- （）の部分に:idが入り、コントローラーの(params[:id]で取得 -->
				<span class="glyphicon glyphicon-cog" aria-hidden="true"><%= link_to "option", edit_user_path(current_user.id) %></span>
			</section>
			<section class="Newbook">
				<h3>New book</h3>

				<!-- Book.newは0から1を生成 -->
				<%= form_for(@book) do |book|%>
					<p>Title</p>
					<%= book.text_field :title %>
					<p>Opinion</p>
					<%= book.text_field :body %>
					<%= book.submit "Create Book" %>
				<% end %>
			</section>
		</div>
	</div>
    <div class="col-xs-9">
		<table class="box2 table table-striped">
			<caption></caption>
			<thead>
				<tr>
					<h3>Books</h3>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td></td>
					<td>Title</td>
					<td>Opinion</td>
				</tr>
			</tbody>
			<tbody>

				<!-- eachは纏めてではなく、１個づつ|book|ブロック変数に入る -->
				<!-- @booksには　全ての本　× <Book id: x, title: "x", body: "x", user_id: x> が入っている状態 -->
				<!-- <Book id: 1, title: "a", body: "a", user_id: 1> -->
				<!-- <Book id: 2, title: "i", body: "i", user_id: 1> -->
				<!-- <Book id: 3, title: "u", body: "u", user_id: 2> のように順番に画面上に表示されていく-->
				<% @books.each do |book| %>
				<tr>
					<td><%=link_to attachment_image_tag(book.user, :profile_image,size:'50x50', fallback: "no_image.jpg"), user_path(book.user) %></td>
					<!-- <Book id: x, title: "x", body: "x", user_id: x>からBook idを引数にすることでそのidのテーブル全てを取り出せる-->
					<td><%= link_to book.title, book_path(book.id) %></td>
					<td><%= book.body %></td>
				</tr>
				<% end %>
			</tbody>
		</table>
	</div>
</body>